export class BaseElement extends HTMLElement{constructor(){super(),this._updateRequested=!1,this._eventListeners=[]}connectedCallback(){this.update(),this.addEventListeners(),document.addEventListener("language-changed",()=>this.update())}disconnectedCallback(){this.removeEventListeners()}update(){let e=this.innerHTML,n=this.render();e!==n&&(this.innerHTML=n,this.addEventListeners())}requestUpdate(){this._updateRequested||(this._updateRequested=!0,Promise.resolve().then(()=>{this._updateRequested=!1,this.update()}))}defineReactiveProperty(e,n){defineReactiveProperty(this,e,n)}addEventListenerWithCleanup(e,n,r){let i=this.querySelector(e);if(i){let e=this._eventListeners.find(e=>e.element===i&&e.event===n);e&&(i.removeEventListener(n,e.handler),this._eventListeners=this._eventListeners.filter(n=>n!==e)),i.addEventListener(n,r),this._eventListeners.push({element:i,event:n,handler:r})}}addEventListeners(){}removeEventListeners(){this._eventListeners.forEach(({element:e,event:n,handler:r})=>{e.removeEventListener(n,r)}),this._eventListeners=[]}t(e){return i18n.t(e)}render(){}static define(e){return customElements.define(e,this),this}}export class ShadowElement extends BaseElement{constructor(){super(),this._shadowRoot=this.attachShadow?this.attachShadow({mode:"open"}):this,this._shadowRoot}get shadowRoot(){return this._shadowRoot}update(){this.shadowRoot.innerHTML=this.render()}render(){return""}}export function addEventListenerOnce(e,n,r){let i=`__${n}_handler__`;e[i]&&e.removeEventListener(n,e[i]),e[i]=r,e.addEventListener(n,r)}export function removeEventListener(e,n,r){e.removeEventListener(n,r)}export const html=(e,...n)=>e.reduce((e,r,i)=>{let o=n[i-1];return e+(void 0!==o?o:"")+r});export const styleMap=e=>Object.entries(e).map(([e,n])=>`${e}: ${n}`).join("; ");export const i18n={translations:{},get currentLanguage(){let e=localStorage.getItem("currentLanguage");if(e&&this.translations[e])return e;return localStorage.removeItem("currentLanguage"),"en"},set currentLanguage(lang){this.translations[lang]?localStorage.setItem("currentLanguage",lang):localStorage.setItem("currentLanguage","en")},t(e){let n=e.split("."),r=this.translations[this.currentLanguage];for(let i of n){if(!r||void 0===r[i])return e;r=r[i]}return r},setLanguage(e){this.currentLanguage=e,document.dispatchEvent(new CustomEvent("language-changed"))},addTranslations(e,n){this.translations[e]={...this.translations[e],...n}},defaultTranslations:{en:{error:"Error",error_invalid_component_or_layout:"Invalid component or layout",error_loading_page:"Error loading page",page_not_found:"Page Not Found",page_not_found_description:"The requested page could not be found."}},init(){Object.entries(this.defaultTranslations).forEach(([e,n])=>{this.addTranslations(e,n)})}};i18n.init();export const t=i18n.t.bind(i18n);export function defineReactiveProperty(e,n,r){let i=r;Object.defineProperty(e,n,{get:()=>i,set(n){i=n,e.requestUpdate()},configurable:!0,enumerable:!0})}let app=document.querySelector("#app");export function initRouter(e){window.addEventListener("navigate",n=>{let{path:r}=n.detail;window.history.pushState({},"",r),renderContent(r,e)}),window.addEventListener("popstate",()=>{renderContent(window.location.pathname,e)}),renderContent(window.location.pathname,e)}async function renderContent(e,n){let r=n[e];if(r)try{let e=(await r.component()).default,n=document.getElementById(r.layout);if(e&&e.prototype instanceof HTMLElement&&n){let i=n.content.cloneNode(!0),o=new e;app.innerHTML="",app.appendChild(i),app.querySelector("#app-content").appendChild(o),app.className=r.layout;let a=i18n.t(r.titleKey||o.constructor.name),s=i18n.t(r.descriptionKey||"");setTitle(a),setDescription(s)}else app.innerHTML=i18n.t("error_invalid_component_or_layout"),setTitle(i18n.t("error")),setDescription(i18n.t("error_invalid_component_or_layout"))}catch(e){app.innerHTML=i18n.t("error_loading_page"),setTitle(i18n.t("error")),setDescription(i18n.t("error_loading_page"))}else app.innerHTML=i18n.t("page_not_found"),setTitle(i18n.t("page_not_found")),setDescription(i18n.t("page_not_found_description"))}function setTitle(e){let n=window.APP_TITLE||"dim";document.title=`${e} | ${n}`}function setDescription(e){let n=document.querySelector('meta[name="description"]');return n?n.setAttribute("content",e):((n=document.createElement("meta")).name="description",n.content=e,document.head.appendChild(n)),n}
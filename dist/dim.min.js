export class BaseElement extends HTMLElement{constructor(){super(),this._updateRequested=!1,this._eventListeners=[]}connectedCallback(){this.update(),this.addEventListeners(),document.addEventListener("language-changed",()=>this.update())}disconnectedCallback(){this.removeEventListeners()}update(){let e=this.innerHTML,t=this.render();e!==t&&(this.innerHTML=t,this.addEventListeners())}requestUpdate(){this._updateRequested||(this._updateRequested=!0,Promise.resolve().then(()=>{this._updateRequested=!1,this.update()}))}defineReactiveProperty(e,t){defineReactiveProperty(this,e,t)}addEventListenerWithCleanup(e,t,n){let r=this.querySelector(e);if(r){let e=this._eventListeners.find(e=>e.element===r&&e.event===t);e&&(r.removeEventListener(t,e.handler),this._eventListeners=this._eventListeners.filter(t=>t!==e)),r.addEventListener(t,n),this._eventListeners.push({element:r,event:t,handler:n})}}addEventListeners(){}removeEventListeners(){this._eventListeners.forEach(({element:e,event:t,handler:n})=>{e.removeEventListener(t,n)}),this._eventListeners=[]}t(e){return i18n.t(e)}render(){}static define(e){return customElements.define(e,this),this}}export class ShadowElement extends BaseElement{constructor(){super(),this.attachShadow({mode:"open"})}update(){this.shadowRoot.innerHTML=this.render()}render(){}}export function addEventListenerOnce(e,t,n){let r=`__${t}_handler__`;e[r]&&e.removeEventListener(t,e[r]),e[r]=n,e.addEventListener(t,n)}export function removeEventListener(e,t,n){e.removeEventListener(t,n)}export const html=(e,...t)=>e.reduce((e,n,r)=>{let i=t[r-1];return e+(void 0!==i?i:"")+n});export const styleMap=e=>Object.entries(e).map(([e,t])=>`${e}: ${t}`).join("; ");export const i18n={translations:{},get currentLanguage(){return localStorage.getItem("currentLanguage")||"en"},set currentLanguage(lang){localStorage.setItem("currentLanguage",lang)},t(e){return this.translations[this.currentLanguage][e]||e},setLanguage(e){this.currentLanguage=e,document.dispatchEvent(new CustomEvent("language-changed"))},addTranslations(e,t){this.translations[e]={...this.translations[e],...t}}};export function defineReactiveProperty(e,t,n){let r=n;Object.defineProperty(e,t,{get:()=>r,set(t){r=t,e.requestUpdate()},configurable:!0,enumerable:!0})}let app=document.querySelector("#app");export function initRouter(e){window.addEventListener("navigate",t=>{let{path:n}=t.detail;window.history.pushState({},"",n),renderContent(n,e)}),window.addEventListener("popstate",()=>{renderContent(window.location.pathname,e)}),renderContent(window.location.pathname,e)}async function renderContent(e,t){let n=t[e];if(n)try{let e=(await n.component()).default,t=document.getElementById(n.layout);if(e&&e.prototype instanceof HTMLElement&&t){let r=t.content.cloneNode(!0),i=new e;app.innerHTML="",app.appendChild(r),app.querySelector("#app-content").appendChild(i),app.className=n.layout,setTitle(n.title||i.constructor.name)}else console.error("Invalid component or layout:",e,t),app.innerHTML="<div>Error: Invalid component or layout</div>",setTitle("Error")}catch(e){console.error("Error loading module:",e),app.innerHTML="<div>Error loading page</div>",setTitle("Error")}else app.innerHTML="<div>Page not found</div>",setTitle("Page Not Found")}function setTitle(e){let t=window.APP_TITLE||"dim";document.title=`${e} | ${t}`}